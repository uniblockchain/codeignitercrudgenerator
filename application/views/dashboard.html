{% set menus = [
  {
    'name':'Dashboard',
    'icon':'dashboard',
    'menu':[{
      'name':'Dashboard',
      'link':''
    }]
  },
  { 
    'name':'Request dan Response',
    'icon':'dashboard',
    'menu':[{
      'name':'Request',
      'link':'manage_memberrequests'
    }]

  }
  
  ]%}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Dashboard</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="/public/components/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/public/components/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="/public/components/Ionicons/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="/public/assets/css/AdminLTE.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="/public/components/datatables.net-bs/css/dataTables.bootstrap.min.css">
    
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="/public/assets/css/skins/_all-skins.min.css">
  <!-- Morris chart -->
  <link rel="stylesheet" href="/public/components/morris.js/morris.css">
  <!-- Date Picker -->
  <link rel="stylesheet" href="/public/components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="/public/components/bootstrap-daterangepicker/daterangepicker.css">
  <link rel="stylesheet" href="/public/components/select2/dist/css/select2.min.css">
  

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  <header class="main-header">
    <!-- Logo -->
    <a href="#" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini">Pulsa</span>
      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg"><b>Pulsa</b></span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>

      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- Messages: style can be found in dropdown.less-->
          <li class="dropdown messages-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-envelope-o"></i>
              <span class="label label-success">4</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have 4 messages</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li><!-- start message -->
                    <a href="#">
                      <div class="pull-left">
                        <img src="/public/assets/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Support Team
                        <small><i class="fa fa-clock-o"></i> 5 mins</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <!-- end message -->
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="/public/assets/img/user3-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        AdminLTE Design Team
                        <small><i class="fa fa-clock-o"></i> 2 hours</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="/public/assets/img/user4-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Developers
                        <small><i class="fa fa-clock-o"></i> Today</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="/public/assets/img/user3-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Sales Department
                        <small><i class="fa fa-clock-o"></i> Yesterday</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="pull-left">
                        <img src="/public/assets/img/user4-128x128.jpg" class="img-circle" alt="User Image">
                      </div>
                      <h4>
                        Reviewers
                        <small><i class="fa fa-clock-o"></i> 2 days</small>
                      </h4>
                      <p>Why not buy a new awesome theme?</p>
                    </a>
                  </li>
                </ul>
              </li>
              <li class="footer"><a href="#">See All Messages</a></li>
            </ul>
          </li>
          <!-- Notifications: style can be found in dropdown.less -->
          <li class="dropdown notifications-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-bell-o"></i>
              <span class="label label-warning">10</span>
            </a>
            <ul class="dropdown-menu">
              <li class="header">You have 10 notifications</li>
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu">
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-aqua"></i> 5 new members joined today
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-warning text-yellow"></i> Very long description here that may not fit into the
                      page and may cause design problems
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-users text-red"></i> 5 new members joined
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-shopping-cart text-green"></i> 25 sales made
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-user text-red"></i> You changed your username
                    </a>
                  </li>
                </ul>
              </li>
              <li class="footer"><a href="#">View all</a></li>
            </ul>
          </li>
        
          <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <img src="/public/assets/img/user2-160x160.jpg" class="user-image" alt="User Image">
              <span class="hidden-xs">Alexander Pierce</span>
            </a>
            <ul class="dropdown-menu">
              <!-- User image -->
              <li class="user-header">
                <img src="/public/assets/img/user2-160x160.jpg" class="img-circle" alt="User Image">

                <p>
                  Alexander Pierce - Web Developer
                  <small>Member since Nov. 2012</small>
                </p>
              </li>
              <!-- Menu Body -->
              <li class="user-body">
                <div class="row">
                  <div class="col-xs-4 text-center">
                    <a href="#">Followers</a>
                  </div>
                  <div class="col-xs-4 text-center">
                    <a href="#">Sales</a>
                  </div>
                  <div class="col-xs-4 text-center">
                    <a href="#">Friends</a>
                  </div>
                </div>
                <!-- /.row -->
              </li>
              <!-- Menu Footer-->
              <li class="user-footer">
                <div class="pull-left">
                  <a href="#" class="btn btn-default btn-flat">Profile</a>
                </div>
                <div class="pull-right">
                  <a href="#" class="btn btn-default btn-flat">Sign out</a>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </header>
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- Sidebar user panel -->
      <div class="user-panel">
        <div class="pull-left image">
          <img src="/public/assets/img/user2-160x160.jpg" class="img-circle" alt="User Image">
        </div>
        <div class="pull-left info">
          <p>Alexander Pierce</p>
          <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
        </div>
      </div>
      <!-- search form -->
      <form action="#" method="get" class="sidebar-form">
        <div class="input-group">
          <input type="text" name="q" class="form-control" placeholder="Search...">
          <span class="input-group-btn">
                <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                </button>
              </span>
        </div>
      </form>
      <!-- /.search form -->
      <!-- sidebar menu: : style can be found in sidebar.less -->

      <ul class="sidebar-menu" data-widget="tree">
        <li class="header">NAVIGASI</li>
        {% for menu in menus %}
        <li class="treeview">
          <a href="#">
            <i class="fa fa-{{menu.icon}}"></i> <span>{{menu.name}}</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
            {% for childmenu in menu.menu%}
            <li><a href="/index.php/{{childmenu.link}}"><i class="fa fa-circle-o"></i> {{childmenu.name}}</a></li>
            {% endfor %}
          </ul>
        </li>
        {% endfor %}
      </ul>
    </section>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Dashboard
        <small>Control panel</small>
      </h1>
      <ol class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
          <li {% if breadcrumb.link == '#' %} class="active">{{breadcrumb.text}}{% else %}><a href="{{breadcrumb.link}}">{{breadcrumb.text}}</a>{% endif %}</li>
        {% endfor %}
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">
      {% block content%}
      {% endblock %}
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <!-- <footer class="main-footer">
    <div class="pull-right hidden-xs">
      <b>Version</b> 2.4.0
    </div>
    <strong>Copyright &copy; 2014-2016 <a href="https://adminlte.io">Almsaeed Studio</a>.</strong> All rights
    reserved.
  </footer> -->

  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script src="/public/components/jquery/dist/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/public/components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="/public/components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Morris.js charts -->
<script src="/public/components/raphael/raphael.min.js"></script>
<script src="/public/components/morris.js/morris.min.js"></script>
<!-- Sparkline -->
<script src="/public/components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jQuery Knob Chart -->
<!-- daterangepicker -->
<script src="/public/components/moment/min/moment.min.js"></script>
<script src="/public/components/bootstrap-daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script src="/public/components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<!-- Slimscroll -->
<script src="/public/components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/public/components/fastclick/lib/fastclick.js"></script>
<script src="/public/components/select2/dist/js/select2.min.js"></script>
<!-- AdminLTE App -->
<script src="/public/assets/js/adminlte.js"></script>

<!-- DataTables -->
<script src="/public/components/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="/public/components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script>
  var base_url = window.location.href.split('index.php');
  jQuery.fn
  jQuery.fn.loadTableData = function(){
    var tt = $(this)
    var c = tt.data('controller')
		var fl = []
		 tt.find('th').each(function(){
			 if($(this).data('fieldname')){
				 fl.push({
					 data:$(this).data('fieldname')
				 })
			 }
		 })
		 fl.push({
 			"data":"id",
 			"render":new Function("data", "type","row","meta", "console.log(meta);return '<a data-id=\"'+data+'\" class=\"btn btn-sm btn-default pulloginl-right btn-select\" href=\"'+meta.settings.ajax.split('get_json')[0]+'detail/'+data+'\"><i class=\"fa fa-search\"></i> Pilih </a>'")
 		})
		console.log(tt);
		tt.DataTable({
			"processing": true,
			"serverSide": true,
			"searchDelay": 1000,
			"ordering": false,
			"ajax": base_url[0]+"index.php/"+c+"/get_json",
			"columns": fl
		});
  }

  function init_modal_selection(){
    console.log(base_url);
    $('.btnModal').click(function(){
      var target = $(this).data('target')
      var bdm = $(this).data('domain')

      var thide = $(this).parents('.input-wrap').find('input[type="hidden"]').prop('id')
      var ttext = $(this).parents('.input-wrap').find('input[type="text"]').prop('id')
      console.log(thide);
      console.log(ttext);
      $('#'+target).find('table').attr('data-thide',thide)
      $('#'+target).find('table').attr('data-ttext',ttext)
      var c = $('#'+target).data('controller')
      if($('#'+target).data('init') != 1){
        $('#'+target).data('init',1)

      var fl = [{
        "data":"id",
        "render":new Function("data", "type","row","meta", "return '<a data-id=\"'+data+'\" class=\"btn btn-sm btn-default pull-right btn-select\" href=\"#\"><i class=\"fa fa-search\"></i> Pilih </a>'")
      }]
       $('#'+target).find('th').each(function(){
         if($(this).data('fieldname')){
           fl.push({
             data:$(this).data('fieldname')
           })
         }
       })
      var mtt = $('#'+target).find('table');
      mtt.DataTable({
        "processing": true,
        "serverSide": true,
        "searchDelay": 1000,
        "ordering": false,
        "ajax": {
            "url": base_url[0]+"index.php/"+c+"/get_json",
            "data": function ( d ) {
              if(bdm){
                for (var prop in bdm) {
                  // d.cond = []
                  if (bdm.hasOwnProperty(prop)) {
                    d[prop] = bdm[prop]
                  }
                }
              }
            }
        },
        "columns": fl
      });
      }

      $('#'+target).find('table').css('width','100%')
      $('#'+target).modal('show')
    })
    $('.modal').on('click','.btn-select',function(){
        $('#'+$(this).parents('table').data('thide')).val($(this).data('id'))
        var ddis = $(this).parents('table').data('display')+"";
        var didx = ddis.split('-')
        var so = ''
        for (var i in didx) {
          if(i>0){
            so += '-'
          }
          so += $(this).parents('tr').children('td:eq('+didx[i]+')').text()
        }
        $('#'+$(this).parents('table').data('ttext')).val(so)
        $(this).parents('.modal').modal('hide')
    })
  }
  $(document).ready(function(){
    init_modal_selection()
    $('.form-select').select2()
    $('.select2').css('width','100%');
})
$('.form-select').select2()
</script>
{% block bottom %}
{% endblock %}
</body>
</html>
